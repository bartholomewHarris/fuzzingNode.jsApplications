!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/animations"),require("@angular/common"),require("@angular/material/progress-bar"),require("@angular/material/core"),require("@angular/material/card"),require("@angular/material/icon")):"function"==typeof define&&define.amd?define("@angular-material-extensions/password-strength",["exports","@angular/core","@angular/forms","@angular/animations","@angular/common","@angular/material/progress-bar","@angular/material/core","@angular/material/card","@angular/material/icon"],e):e(((t=t||self)["angular-material-extensions"]=t["angular-material-extensions"]||{},t["angular-material-extensions"]["password-strength"]={}),t.ng.core,t.ng.forms,t.ng.animations,t.ng.common,t.ng.material["progress-bar"],t.ng.material.core,t.ng.material.card,t.ng.material.icon)}(this,(function(t,e,a,r,n,o,i,s,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p,c;function d(t,e,a,r){var n,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(o<3?n(i):o>3?n(e,a,i):n(e,a))||i);return o>3&&i&&Object.defineProperty(e,a,i),i}function h(t,e){var a="function"==typeof Symbol&&t[Symbol.iterator];if(!a)return t;var r,n,o=a.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return i}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}(p=t.Colors||(t.Colors={})).primary="primary",p.accent="accent",p.warn="warn",(c=t.Criteria||(t.Criteria={})).at_least_eight_chars="minChar",c.at_least_one_lower_case_char="lowerCase",c.at_least_one_upper_case_char="upperCase",c.at_least_one_digit_char="digit",c.at_least_one_special_char=" specialChar",c.at_custom_chars="customChars";var g=function(){function t(){this._type="text"}return Object.defineProperty(t.prototype,"type",{get:function(){return this.isVisible?"text":"password"},enumerable:!0,configurable:!0}),d([e.Input()],t.prototype,"isVisible",void 0),t=d([e.Component({selector:"mat-pass-toggle-visibility",template:'<button (click)="isVisible = !isVisible"\n        type="button"\n        class="mat-icon-button cdk-focused cdk-mouse-focused" mat-icon-button\n        matRippleCentered="true"\n        matRipple>\n  <mat-icon>{{isVisible ? \'visibility\' : \'visibility_off\' }}</mat-icon>\n</button>\n\n',encapsulation:e.ViewEncapsulation.None,styles:[""]})],t)}(),u=function(){function t(){}return t.prototype.isUndefinedOrEmpty=function(t){t&&t.value&&t.value.length},t.prototype.validate=function(t,e){var a=this;return function(r){if(a.isUndefinedOrEmpty(r),!e.test(r.value)){var n={};return n[t]={actualValue:r.value,requiredPattern:e},n}}},t.prototype.confirm=function(t){var e=this;return function(a){if(e.isUndefinedOrEmpty(a),a.value!==t)return{notConfirmed:{password:t,passwordConfirmation:a.value}}}},t}(),f={lowerCase:RegExp(/^(?=.*?[a-z])/),upperCase:RegExp(/^(?=.*?[A-Z])/),digit:RegExp(/^(?=.*?[0-9])/),specialChar:RegExp(/^(?=.*?[" !"#$%&'()*+,-./:;<=>?@[\]^_`{|}~"])/)},C=function(){function r(){this.enableLengthRule=!0,this.enableLowerCaseLetterRule=!0,this.enableUpperCaseLetterRule=!0,this.enableDigitRule=!0,this.enableSpecialCharRule=!0,this.min=8,this.max=30,this.warnThreshold=21,this.accentThreshold=81,this.onStrengthChanged=new e.EventEmitter,this.criteriaMap=new Map,this.passwordFormControl=new a.FormControl,this.passwordConfirmationFormControl=new a.FormControl,this.validatorsArray=[],this._strength=0,this.matPasswordStrengthValidator=new u}return r.prototype.ngOnInit=function(){this.setRulesAndValidators(),this.password&&this.calculatePasswordStrength()},r.prototype.ngOnChanges=function(e){e.externalError&&e.externalError.firstChange||e.password.isFirstChange()||(e.externalError&&e.externalError.currentValue?this._color=t.Colors.warn:e.password.previousValue!==e.password.currentValue||e.password.firstChange?this.password&&this.password.length>0?this.calculatePasswordStrength():this.reset():this.calculatePasswordStrength())},Object.defineProperty(r.prototype,"strength",{get:function(){return this._strength?this._strength:0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"color",{get:function(){return this._strength<this.warnThreshold?t.Colors.warn:this._strength<this.accentThreshold?t.Colors.accent:t.Colors.primary},enumerable:!0,configurable:!0}),r.prototype._containAtLeastMinChars=function(){return this.containAtLeastMinChars=this.password.length>=this.min,this.containAtLeastMinChars},r.prototype._containAtLeastOneLowerCaseLetter=function(){return this.containAtLeastOneLowerCaseLetter=this.criteriaMap.get(t.Criteria.at_least_one_lower_case_char).test(this.password),this.containAtLeastOneLowerCaseLetter},r.prototype._containAtLeastOneUpperCaseLetter=function(){return this.containAtLeastOneUpperCaseLetter=this.criteriaMap.get(t.Criteria.at_least_one_upper_case_char).test(this.password),this.containAtLeastOneUpperCaseLetter},r.prototype._containAtLeastOneDigit=function(){return this.containAtLeastOneDigit=this.criteriaMap.get(t.Criteria.at_least_one_digit_char).test(this.password),this.containAtLeastOneDigit},r.prototype._containAtLeastOneSpecialChar=function(){return this.containAtLeastOneSpecialChar=this.criteriaMap.get(t.Criteria.at_least_one_special_char).test(this.password),this.containAtLeastOneSpecialChar},r.prototype._containCustomChars=function(){return this.containAtCustomChars=this.criteriaMap.get(t.Criteria.at_custom_chars).test(this.password),this.containAtCustomChars},r.prototype.parseCustomValidatorsRegex=function(t){return void 0===t&&(t=this.customValidator),this.customValidator instanceof RegExp?this.customValidator:"string"==typeof this.customValidator?RegExp(this.customValidator):void 0},r.prototype.setRulesAndValidators=function(){var e=this;this.validatorsArray=[],this.criteriaMap=new Map,this.passwordConfirmationFormControl.setValidators(a.Validators.compose([a.Validators.required,this.matPasswordStrengthValidator.confirm(this.password)])),this.validatorsArray.push(a.Validators.required),this.enableLengthRule&&(this.criteriaMap.set(t.Criteria.at_least_eight_chars,RegExp("^.{"+this.min+","+this.max+"}$")),this.validatorsArray.push(a.Validators.minLength(this.min)),this.validatorsArray.push(a.Validators.maxLength(this.max))),this.enableLowerCaseLetterRule&&(this.criteriaMap.set(t.Criteria.at_least_one_lower_case_char,f.lowerCase),this.validatorsArray.push(a.Validators.pattern(f.lowerCase))),this.enableUpperCaseLetterRule&&(this.criteriaMap.set(t.Criteria.at_least_one_upper_case_char,f.upperCase),this.validatorsArray.push(a.Validators.pattern(f.upperCase))),this.enableDigitRule&&(this.criteriaMap.set(t.Criteria.at_least_one_digit_char,f.digit),this.validatorsArray.push(a.Validators.pattern(f.digit))),this.enableSpecialCharRule&&(this.criteriaMap.set(t.Criteria.at_least_one_special_char,f.specialChar),this.validatorsArray.push(a.Validators.pattern(f.specialChar))),this.customValidator&&(this.criteriaMap.set(t.Criteria.at_custom_chars,this.parseCustomValidatorsRegex()),this.validatorsArray.push(a.Validators.pattern(this.parseCustomValidatorsRegex()))),this.criteriaMap.forEach((function(t,a){e.validatorsArray.push(e.matPasswordStrengthValidator.validate(a,t))})),this.passwordFormControl.setValidators(a.Validators.compose(m(this.validatorsArray))),this.Validators=a.Validators.compose(m(this.validatorsArray))},r.prototype.calculatePasswordStrength=function(){var t=[],e=100/this.criteriaMap.size;t.push(!!this.enableLengthRule&&this._containAtLeastMinChars(),!!this.enableLowerCaseLetterRule&&this._containAtLeastOneLowerCaseLetter(),!!this.enableUpperCaseLetterRule&&this._containAtLeastOneUpperCaseLetter(),!!this.enableDigitRule&&this._containAtLeastOneDigit(),!!this.enableSpecialCharRule&&this._containAtLeastOneSpecialChar(),!!this.customValidator&&this._containCustomChars()),this._strength=t.filter((function(t){return t})).length*e,this.onStrengthChanged.emit(this.strength),this.setRulesAndValidators()},r.prototype.reset=function(){this._strength=0,this.containAtLeastMinChars=this.containAtLeastOneLowerCaseLetter=this.containAtLeastOneUpperCaseLetter=this.containAtLeastOneDigit=this.containAtCustomChars=this.containAtLeastOneSpecialChar=!1},d([e.Input()],r.prototype,"password",void 0),d([e.Input()],r.prototype,"externalError",void 0),d([e.Input()],r.prototype,"enableLengthRule",void 0),d([e.Input()],r.prototype,"enableLowerCaseLetterRule",void 0),d([e.Input()],r.prototype,"enableUpperCaseLetterRule",void 0),d([e.Input()],r.prototype,"enableDigitRule",void 0),d([e.Input()],r.prototype,"enableSpecialCharRule",void 0),d([e.Input()],r.prototype,"min",void 0),d([e.Input()],r.prototype,"max",void 0),d([e.Input()],r.prototype,"customValidator",void 0),d([e.Input()],r.prototype,"warnThreshold",void 0),d([e.Input()],r.prototype,"accentThreshold",void 0),d([e.Output()],r.prototype,"onStrengthChanged",void 0),r=d([e.Component({selector:"mat-password-strength",exportAs:"matPasswordStrength",template:'<mat-progress-bar mode="determinate"\n                  [color]="color"\n                  [value]="strength">\n</mat-progress-bar>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".green :host::ng-deep .mat-progress-bar.mat-primary .mat-progress-bar-fill::after{background-color:#43a047}"]})],r)}();function y(t,e,a){var n={timing:t,delay:0,rotateX:e,rotateY:a};return r.animation([r.style({"backface-visibility":"visible"}),r.animate("{{ timing }}s {{ delay }}s ease-in",r.keyframes([r.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),r.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),r.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),r.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),r.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:n})}var v=y(1,1,0),w=y(1,0,1),b=r.animation(r.animate("{{ timing }}s {{ delay }}s",r.keyframes([r.style({transform:"translate3d(0, 0, 0)",offset:0}),r.style({transform:"translate3d(-10px, 0, 0)",offset:.1}),r.style({transform:"translate3d(10px, 0, 0)",offset:.2}),r.style({transform:"translate3d(-10px, 0, 0)",offset:.3}),r.style({transform:"translate3d(10px, 0, 0)",offset:.4}),r.style({transform:"translate3d(-10px, 0, 0)",offset:.5}),r.style({transform:"translate3d(10px, 0, 0)",offset:.6}),r.style({transform:"translate3d(-10px, 0, 0)",offset:.7}),r.style({transform:"translate3d(10px, 0, 0)",offset:.8}),r.style({transform:"translate3d(-10px, 0, 0)",offset:.9}),r.style({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),_=function(){function t(){this.enableScoreInfo=!1,this.lowerCaseCriteriaMsg="contains at least one lower character",this.upperCaseCriteriaMsg="contains at least one upper character",this.digitsCriteriaMsg="contains at least one digit character",this.specialCharsCriteriaMsg="contains at least one special character",this.customCharsCriteriaMsg="contains at least one custom character"}return t.prototype.ngOnInit=function(){this.minCharsCriteriaMsg||(this.minCharsCriteriaMsg="contains at least "+this.passwordComponent.min+" characters")},d([e.Input()],t.prototype,"passwordComponent",void 0),d([e.Input()],t.prototype,"enableScoreInfo",void 0),d([e.Input()],t.prototype,"lowerCaseCriteriaMsg",void 0),d([e.Input()],t.prototype,"upperCaseCriteriaMsg",void 0),d([e.Input()],t.prototype,"digitsCriteriaMsg",void 0),d([e.Input()],t.prototype,"specialCharsCriteriaMsg",void 0),d([e.Input()],t.prototype,"customCharsCriteriaMsg",void 0),d([e.Input()],t.prototype,"minCharsCriteriaMsg",void 0),t=d([e.Component({selector:"mat-password-strength-info",exportAs:"matPasswordStrengthInfo",template:'<mat-card @list>\n  <mat-card-content>\n    <div class="info-row" @items *ngIf="passwordComponent.enableLowerCaseLetterRule">\n      <div *ngIf="passwordComponent.containAtLeastOneLowerCaseLetter; then done else error" @flipY>\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{lowerCaseCriteriaMsg}}</span>\n    </div>\n\n    <div class="info-row" @items *ngIf="passwordComponent.enableUpperCaseLetterRule">\n      <div *ngIf="passwordComponent.containAtLeastOneUpperCaseLetter; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{upperCaseCriteriaMsg}}</span>\n    </div>\n\n    <div class="info-row" @items *ngIf="passwordComponent.enableDigitRule">\n      <div *ngIf="passwordComponent.containAtLeastOneDigit; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{digitsCriteriaMsg}}</span>\n    </div>\n\n    <div class="info-row" @items *ngIf="passwordComponent.enableSpecialCharRule">\n      <div *ngIf="passwordComponent.containAtLeastOneSpecialChar; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{specialCharsCriteriaMsg}}</span>\n    </div>\n\n    <div class="info-row" @items *ngIf="passwordComponent.enableLengthRule">\n      <div *ngIf="passwordComponent.containAtLeastMinChars; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{minCharsCriteriaMsg}}</span>\n    </div>\n\n    <div class="info-row" @items *ngIf="passwordComponent.customValidator">\n      <div *ngIf="passwordComponent.containAtCustomChars; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>{{customCharsCriteriaMsg}}</span>\n    </div>\n\n    <div *ngIf="enableScoreInfo" class="info-row" @items>\n      <div *ngIf="passwordComponent.strength === 100; then done else error">\n      </div>\n      <ng-template #done>\n        <mat-icon @positiveState color="primary">done</mat-icon>\n      </ng-template>\n      <ng-template #error>\n        <mat-icon @negativeState color="warn">error</mat-icon>\n      </ng-template>\n      <span>Password\'s strength = {{passwordComponent.strength}} %100</span>\n    </div>\n\n  </mat-card-content>\n</mat-card>\n',animations:[r.trigger("list",[r.transition(":enter",[r.query("@items",r.stagger(300,r.animateChild()))])]),r.trigger("items",[r.transition(":enter",[r.style({transform:"scale(0.5)",opacity:0}),r.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",r.style({transform:"scale(1)",opacity:1}))]),r.transition(":leave",[r.style({transform:"scale(1)",opacity:1,height:"*"}),r.animate("1s cubic-bezier(.8,-0.6,0.2,1.5)",r.style({transform:"scale(0.5)",opacity:0,height:"0px",margin:"0px"}))])]),r.trigger("positiveState",[r.transition(":enter",[r.style({"backface-visibility":"visible"}),r.animate("{{ timing }}s {{ delay }}s ease-in",r.keyframes([r.style({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),r.style({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),r.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),r.style({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),r.style({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:1,rotateY:0}})]),r.trigger("negativeState",[r.transition(":enter",r.useAnimation(b))])],styles:["mat-card{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;box-sizing:border-box;display:-webkit-box;display:flex;place-content:stretch center;-webkit-box-align:stretch;align-items:stretch;-webkit-box-flex:1;flex:1 1 0}mat-card mat-card-content{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;box-sizing:border-box;display:-webkit-box;display:flex;max-width:100%;place-content:stretch flex-start;-webkit-box-align:stretch;align-items:stretch}mat-card mat-card-content mat-icon{margin-right:10px}mat-card mat-card-content .info-row{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;box-sizing:border-box;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}"]})],t)}(),x=function(){function t(){}var a;return a=t,t.forRoot=function(){return{ngModule:a,providers:[]}},t=a=d([e.NgModule({imports:[n.CommonModule,o.MatProgressBarModule,s.MatCardModule,l.MatIconModule,i.MatRippleModule],exports:[C,_,g],declarations:[C,_,g],entryComponents:[g]})],t)}();t.MatPassToggleVisibilityComponent=g,t.MatPasswordStrengthComponent=C,t.MatPasswordStrengthInfoComponent=_,t.MatPasswordStrengthModule=x,t.MatPasswordStrengthValidator=u,t.RegExpValidator=f,t.flipIn=y,t.flipInX=v,t.flipInY=w,t.shake=b,t.ɵa=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-material-extensions-password-strength.umd.min.js.map